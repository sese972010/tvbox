# TVBox 源聚合器 (最终版图形化部署指南)

这是一个全自动的TVBox源查找、测试、合并和部署工具。您无需接触任何命令行，只需在网页上进行一系列点击操作，即可拥有一个为您持续更新高质量TVBox源的专属订阅地址。

**本项目采用导入式部署，您将创建一个全新的、完全属于您自己的独立项目，100%确保部署成功。**

---

## 全图形化部署指南 (完整无删减)

请严格按照以下步骤操作。

### 准备工作
- **一个 GitHub 账号** (并已登录)。
- **一个 Cloudflare 账号** (并已登录)。

---

### 步骤 1: 在您的 GitHub 账号下创建一个全新的空仓库

1.  **打开 GitHub 网站**。点击页面右上角的 **加号 `+` 图标**，在下拉菜单中选择 **[New repository]**。
2.  **Repository name (仓库名称)**: 给您的项目起一个新名字，例如 `my-tvbox-source`。
3.  **Description (描述)**: 可以留空。
4.  **确保选择了 "Public" (公开)**。
5.  **不要**勾选任何 "Initialize this repository with..." 的选项 (例如 `Add a README file`)。我们需要一个完全空的仓库。
6.  点击页面底部的绿色按钮 **[Create repository]**。

---

### 步骤 2: 【核心】将本项目代码导入到您的新仓库

1.  创建成功后，您会看到一个标题为 `Quick setup` 的页面。请找到并点击页面中间一个带有下载箭头的按钮 **[Import code]**。
    *   *如果您没有看到这个按钮，也可以直接在浏览器地址栏输入 `https://github.com/您的用户名/您刚创建的仓库名/import` 来进入导入页面。*
2.  在 **"Your old repository’s clone URL"** (您旧仓库的克隆URL) 这个输入框里，粘贴本项目原始仓库的地址：
    `https://github.com/sese972010/tvbox.git`
3.  点击页面底部的 **[Begin import]** 按钮。
4.  导入过程会开始，页面会显示进度。通常一分钟内即可完成。
5.  当您看到一个绿色的对勾 ✔️ 和 "Import complete!" 字样时，**点击仓库名称链接**，进入您自己的、已经包含所有代码的仓库主页。
6.  **后续所有操作都在这个您亲手创建并导入了代码的仓库里进行。**

---

### 步骤 3: 在您的新仓库中配置三个必需的密钥

1.  **回到您在步骤2中创建并导入了代码的GitHub仓库页面。**
2.  点击页面顶部的 **[Settings]** 标签页。
3.  在左侧菜单中，依次点击 **[Secrets and variables]** -> **[Actions]**。
4.  您会看到页面上有 **[Secrets]** 和 **[Variables]** 两个标签页。**请确保您停留在默认的 [Secrets] 标签页上。** 我们所有的令牌都必须作为Secret存储，以保证安全。
5.  在 **"Repository secrets"** 这个标题的右侧，点击绿色的 **[New repository secret]** 按钮。现在，我们来逐一添加三个密钥。

    -   **密钥一：Cloudflare Account ID**
        -   **Name**: `CLOUDFLARE_ACCOUNT_ID` (请务必精确复制)
        -   **Secret**: (请按照之前的详细说明，粘贴您获取的Cloudflare Account ID)
        -   点击 **[Add secret]**。

    -   **密钥二：Cloudflare API Token**
        -   再次点击 **[New repository secret]**。
        -   **Name**: `CLOUDFLARE_API_TOKEN`
        -   **Secret**: (请按照之前的详细说明，粘贴您创建的Cloudflare API Token)
        -   点击 **[Add secret]**。

    -   **密钥三：GitHub Token**
        -   再次点击 **[New repository secret]**。
        -   **Name**: `GH_TOKEN` (注意：不是 GITHUB_TOKEN)
        -   **Secret**: (请按照之前的详细说明，创建一个新的GitHub Token并粘贴在这里)
        -   点击 **[Add secret]**。

---

### 步骤 4: 触发首次自动部署

1.  在您的仓库页面，点击顶部菜单的 **[< > Code]** 回到代码主页。
2.  **重要提示**: 导入操作可能会复制多个分支。请确保您当前在 **`main`** 分支上进行操作。
3.  找到并点击 `README.md` 文件，然后点击右上角的 **铅笔图标 (Edit this file)**。
4.  在文件末尾随便添加一个空格或一句话。
5.  滚动到页面顶部或底部，点击绿色的 **[Commit changes...]** 按钮，在弹窗中再次点击 **[Commit changes]**。
6.  **部署已自动开始！** 点击顶部的 **[Actions]** 标签页，您会立刻看到一个正在运行的工作流。

---

### 步骤 5: 获取并配置您的专属地址

自动化过程大约需要2-3分钟。在"Actions"页面等待工作流图标变为**绿色对勾** ✔️。

#### 5.1 获取后端API地址
1.  在"Actions"页面，点击成功的工作流名称。
2.  在左侧点击 **[deploy-api]** 任务。
3.  在右侧展开 **[Deploy Worker]** 步骤，您会看到一行 `Published tvbox-source-aggregator ...`，后面跟着的 `https://...workers.dev` 就是您的API地址。**请复制它**。

#### 5.2 将API地址配置到前端 (这将触发第二次部署)
1.  回到仓库代码主页，依次进入 `frontend` 文件夹 -> 点击 `script.js` 文件。
2.  点击 **铅笔图标** 编辑文件。
3.  将 `const API_BASE_URL = '...'` 引号中的内容，替换为您刚复制的API地址。
4.  点击 **[Commit changes...]** 两次保存。
5.  **这会触发第二次自动部署**。请再次前往"Actions"页面，等待这个新的工作流也成功完成。

#### 5.3 获取最终UI界面地址
1.  等待第二次部署成功后，点击该工作流。
2.  在左侧点击 **[deploy-ui]** 任务。
3.  在右侧展开 **[Deploy to Cloudflare Pages]** 步骤，您会看到一个 `https://tvbox-ui-....pages.dev` 的地址。**这就是您最终的控制面板地址！**

---

### 步骤 6: 完成！

恭喜您！现在，您可以访问您在上一步获得的 `...pages.dev` 地址，开始使用您的TVBox源聚合工具了！

---
## UI界面使用指南 (完整无删减)

部署成功后，您的所有操作都在浏览器中完成。

**第一步：访问您的专属控制面板**
   - 在浏览器地址栏输入您在 **“步骤 5.3”** 中获得的 `...pages.dev` 地址，然后按回车。
   - 您会看到一个标题为 **“TVBox源聚合器”** 的简洁页面。

**第二步：发起聚合任务**
   1.  **找到输入框**: 页面顶部有一个文本输入框。
   2.  **输入关键字 (可选)**: 如果您想搜索特定的源，可在此输入。如果留空，程序将使用默认关键字。
   3.  **点击按钮**: 点击蓝色的 **“开始聚合”** 按钮。

**第三步：观察实时进度**
   1.  点击后，按钮会变为灰色，文本显示为 **“正在处理...”**。
   2.  下方的 **“实时日志”** 区域会开始滚动更新，显示后端的每一步进展。
   3.  过程约需1-2分钟，请耐心等待日志显示 **“任务成功结束”**。

**第四步：下载并使用聚合订阅**
   1.  任务完成后，最下方的 **“聚合订阅链接”** 区域会出现一个蓝色链接：“**点击下载聚合后的订阅文件**”。
   2.  **点击此链接**，浏览器会自动下载 `tvbox_source.json` 文件。
   3.  您可以将此文件用于您的TVBox应用。
